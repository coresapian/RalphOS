# Ralph Progress Log
Started: 2026-01-06

---
## CURRENT PROJECT: Gateway Classic Cars Inventory Scraper
Project: Gateway Classic Cars Inventory Scraper
Target: https://www.gatewayclassiccars.com/inventory

## Codebase Patterns
- **SOURCES QUEUE**: Check `scripts/ralph/sources.json` for all target sources
- **DIRECTORY STRUCTURE**: Each source gets its own folder in `scraped_builds/{source}/`
- **AUTO-SETUP**: Always check if `outputDir` exists, create if not (including urls.json, html/)
- **URL STORAGE**: urls.json format: `{"urls": [...], "lastUpdated": "ISO8601", "totalCount": N}`
- **RATE LIMITING**: Always use 1.5s+ delay between requests
- **PROGRESS TRACKING**: Save scrape_progress.json to allow resuming
- **MANIFEST**: Create manifest.json after scraping with url, filename, scraped_at, file_size_bytes
- **MULTI-SOURCE**: When PRD complete, update sources.json status and generate next PRD

## Current Project
- Target site: https://www.gatewayclassiccars.com/inventory
- Output dir: scraped_builds/gateway_classic_cars/
- Unknown pagination pattern - needs investigation
- Classic car dealer inventory

## Directory Structure
```
scraped_builds/
├── martiniworks/           # COMPLETED: 999 build threads
│   ├── html/               # 999 HTML files
│   ├── manifest.json
│   ├── scrape_progress.json
│   └── urls.json
│
├── onallcylinders/         # COMPLETED: 446 articles
│   ├── html/               # 446 HTML files
│   ├── manifest.json
│   ├── scrape_progress.json
│   └── urls.json
│
└── gateway_classic_cars/   # CURRENT PROJECT
    ├── html/               # HTML files go here
    └── urls.json           # URLs go here
```

## Key Files
- scripts/ralph/prd.json - Task definitions
- scripts/ralph/progress.txt - This file
- scripts/ralph/sources.json - Sources queue

---

## PROJECT COMPLETED: OnAllCylinders Featured Vehicles Scraper
- Successfully scraped 446 articles from Summit Racing's blog
- All stories passed (US-001 through US-004)
- Data archived in: scraped_builds/onallcylinders/

---

## [2026-01-06] - Project Transition: OnAllCylinders → Gateway Classic Cars
- Updated sources.json: marked onallcylinders as completed (446 articles)
- Set gateway_classic_cars to "in_progress"
- Generated new PRD for Gateway Classic Cars Inventory Scraper

---

## [2026-01-06] - US-001 (OnAllCylinders) ✅
- Created scraper directory structure for OnAllCylinders
- Files created:
  - scraped_builds/onallcylinders/urls.json (empty template)
  - scraped_builds/onallcylinders/html/ (directory for HTML files)
- **Learnings:**
  - Organized scraped_builds/ by source (martiniworks/, onallcylinders/)
  - Each scrape project gets its own subfolder

---

## [2026-01-06] - US-004 (OnAllCylinders) ✅
- Executed full scrape of all 446 articles from OnAllCylinders
- Actual count was 446 (not ~746 as initially estimated)
- Files created:
  - 446 HTML files in scraped_builds/onallcylinders/html/
  - manifest.json with metadata (url, filename, title, scraped_at, file_size_bytes)
- Total data size: 54.4 MB
- Scrape duration: ~15 minutes (446 URLs × 1.5s delay)
- **Learnings:**
  - Estimated article counts from pagination can be inaccurate
  - OnAllCylinders site has fewer articles than pagination suggested
  - Running scraper in background with TaskOutput works for long-running tasks
  - Title extraction from HTML <title> tags needs cleanup (remove site suffix)

---

## PREVIOUS PROJECT: MartiniWorks Build Thread Scraper (COMPLETED)
- Successfully scraped 999 build threads from martiniworks.com
- Files archived in: scraped_builds/martiniworks/
- Learnings from that project:
  - Selenium required for infinite scroll pages
  - Use `--headless=new` for modern Chrome headless mode
  - requests library is lighter than Selenium for simple HTTP fetching
  - Progress file allows resuming interrupted scrapes
  - Rate limiting (1.5s delay) is important for respectful scraping
  - Retry strategy with backoff helps handle transient failures
  - Scraping 1000 URLs with 1.5s delay takes ~30 minutes

---

## [2026-01-06] - US-004 (Gateway Classic Cars) ✅
- Executed full scrape of all 2823 vehicles from Gateway Classic Cars
- Scraping was already complete from previous iteration
- Created manifest.json with metadata (url, filename, title, scraped_at, file_size_bytes)
- Files involved:
  - scraped_builds/gateway_classic_cars/html/ (2823 HTML files)
  - scraped_builds/gateway_classic_cars/manifest.json (created)
  - scripts/create_manifest.py (created - reusable manifest generation script)
- Total data size: 1295.0 MB
- **Learnings:**
  - BeautifulSoup4 useful for HTML title extraction from saved files
  - create_manifest.py is now a reusable script for all scraping projects
  - Gateway Classic Cars has 2823 vehicles across 110 pages
  - Slug extraction from URLs works reliably for filename mapping

---

## [2026-01-06] - US-001 (Custom Wheel Offset) ✅
- Created directory structure for Custom Wheel Offset scraper
- Target: https://www.customwheeloffset.com/wheel-offset-gallery
- Files created:
  - scraped_builds/custom_wheel_offset/urls.json (empty template)
  - scraped_builds/custom_wheel_offset/html/ (directory for HTML files)
- Updated sources.json: set urlsFound to 0 (directory structure ready)
- **Learnings:**
  - PRD stored in workers/ subdirectory by source ID
  - Each source gets isolated workspace in workers/{source_id}/

---

## [2026-01-06] - US-001 (Modified Rides) ✅
- Created scraper directory structure for Modified Rides
- Files created:
  - scraped_builds/modified_rides/urls.json (empty template)
  - scraped_builds/modified_rides/html/ (directory for HTML files)
- **Learnings:**
  - scraped_builds/ is gitignored - data files are not committed
  - Only the PRD file is committed to track progress
  - Each worker has its own PRD in scripts/ralph/workers/{source_id}/prd.json
---

## [2026-01-06] - US-002 (Modified Rides) ✅
- Discovered 1,134 article URLs from Modified Rides sitemap
- Site structure: https://www.modifiedrides.net/news/modified-cars/
- URL pattern: https://www.modifiedrides.net/news/{category}/{article-slug}.html
- Discovery method: Sitemap.xml (https://www.modifiedrides.net/sitemap.xml)
- Files created:
  - scraped_builds/modified_rides/urls.json (1,134 URLs)
- **Learnings:**
  - Modified Rides uses a comprehensive sitemap.xml containing all article URLs
  - No traditional pagination - site appears to use infinite scroll on main page
  - All articles follow consistent URL pattern with category and slug
  - Sitemap is the most reliable way to discover all content
  - Articles span multiple categories: modified-cars, muscle-cars, super-cars, classic-cars, etc.
---

## [2026-01-06] - US-002 (Tacoma World) ✅
- Discovered 618 media URLs from Tacoma World gallery
- Target: https://www.tacomaworld.com/media/ (media gallery index)
- Files created:
  - scripts/ralph/workers/tacoma_world/scrape_urls.py (URL discovery script)
  - scraped_builds/tacoma_world/urls.json (618 URLs)
- Scraped 52 pages of gallery index (12 items per page, last page had 6)
- **Learnings:**
  - Tacoma World build forums require login - not publicly accessible
  - Media gallery index is publicly accessible and shows recent uploads
  - Gallery shows 593,156 total items but only 618 visible in index pagination
  - Media detail pages also require login - only index data available
  - HTML structure uses `class="mediaContainer media-ID"` pattern for items
  - URLs follow pattern: /media/title.ID/
---
